<html>
	<head>
		<title>Chris' Countdown</title>
		<style type="text/css">
			*, html, body, #container #counter
			{
				margin: 0;
				padding: 0;
				height: 100%;
			}
			
			body
			{
				background-color: black;
				color: white;
				font-size: 9em;
				font-family: Verdana;
			}
			
			#container
			{
				display: table;
				margin: 0 auto;
			}
			
			#counter
			{
				display: table-cell;
				vertical-align: middle;
			}
		</style>
		<script type="text/javascript">
			// Define time in ms
			aDay = 86400000;
			aHour = 3600000;
			aMinute = 60000;
			aSecond = 1000;
		
			// Pad the number with an extra zero and round down (lack of integer division fail!)
			function format( number )
			{
				if( number > -10 && number < 10 )
					return "0" + Math.floor( number );
				return Math.floor( number );
			}
			
			// Calculate time remaining based on current time
			function timeRemaining( twins )
			{
				// difference in time (ms)
				var now = new Date();
				var diff = now.getTime() - twins.getTime();

				// Check if countdown should end
				if( diff >= 0 )
				{
					document.body.style.color = 'red';
					clearInterval( interval_id );
					window.interval_id = setInterval( function() { toggle( 'counter' ); }, 800 );
					
					if( target_url != -1 )
						youtube_iframe( target_url );
					
					var time_left = "00:00:00:00";
				}
				// Otherwise format normally
				else
				{
					var time_left = format( diff / aDay ) + ":" +
								format( ( diff % aDay ) / aHour ) + ":" +
								format( ( ( diff % aDay ) % aHour ) / aMinute ) + ":" +
								format( ( ( ( diff % aDay ) % aHour ) % aMinute ) / aSecond );
				}

				return time_left;
			}
			
			function toggle( time_element )
			{
				if( typeof window[ 'toggle_switch' ] === 'undefined' )
					window[ 'toggle_switch' ] = false;
				
				if( window[ 'toggle_switch' ] == 1 )
					document.getElementById( time_element ).style.display = 'None';
				else
					document.getElementById( time_element ).style.display = 'table-cell';
				
				window[ 'toggle_switch' ] = !window[ 'toggle_switch' ];
			}
			
			function youtube_iframe( video_id )
			{
				var ifrm = document.createElement( 'iframe' );
				ifrm.setAttribute( "src", "http://www.youtube.com/embed/" + video_id + "?autoplay=1" ); 
				ifrm.style.width = 1 + "px"; 
				ifrm.style.height = 1 + "px"; 
				ifrm.style.border = 'none';
				document.body.appendChild( ifrm ); 
			}
		</script>
	</head>	
	<body>
		<div id="container">
			<p id="counter"></p>
		</div>
	</body>
	<script type="text/javascript">
		try
		{
			var raw = window.location.href.split( '#' )[ 1 ].split( ';' );

			var x = raw[ 0 ].split( '.' );
			var target_date = new Date( x[ 0 ], x[ 1 ] - 1, x[ 2 ], x[ 3 ], x[ 4 ], 0, 0 ); // year, month, day, hours, minutes, seconds, milliseconds
			
			if( raw.length == 2 && raw[ 1 ] != '' )
				target_url = raw[ 1 ];
			else
				target_url = -1;
		}
		catch( e )
		{
			var target_date = new Date();
			target_url = -1;
		}
		
		interval_id = setInterval( function () { document.getElementById( "counter" ).innerHTML = timeRemaining( target_date ); }, 100 );
	</script>
</html>